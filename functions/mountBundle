function mountBundle() {
  local deploy_DXP="false"
  local deleteBundle="true"
  local useHSQL="false"
  while [ "$1" != "" ]; do
    case $1 in
    -h | -help)
      _showHelp "$0"
      return 0
      ;;
    -dxp)
      shift
      deploy_DXP="true"
      ;;
    -hsql)
      shift
      useHSQL="true"
      ;;
    -u)
      shift
      deleteBundle="false"
      ;;
    esac
    shift
  done

  if [ "$deploy_DXP" = "false" ]; then
    cd "$PATH_TO_PORTAL/" || return
  else
    cd "$PATH_TO_DXP_PORTAL/" || return
  fi
  if [ "$deleteBundle" = "true" ]; then
    rm -rf ../bundles
    echo "Deleting /bundles folder"
  fi

  if [ "$deploy_DXP" = "false" ]; then
    ant setup-profile-portal
    echo "Deploying Liferay Community Edition"
  else
    ant setup-profile-dxp
    echo "Deploying Liferay DXP Edition"
  fi
  ant all
  if [ "$useHSQL" = "false" ]; then
    cp "$LIFERAY_ZSH_INSTALLATION_PATH/util-files/portal-ext.properties"  "$PATH_TO_BUNDLES/portal-ext.properties"
    sed -i '' "s/%JDBC_USER%/$MYSQL_USER/g" "$PATH_TO_BUNDLES/portal-ext.properties"
    sed -i '' "s/%JDBC_PASSWORD%/$MYSQL_PASSWORD/g" "$PATH_TO_BUNDLES/portal-ext.properties"
  fi
  cp "$LIFERAY_ZSH_INSTALLATION_PATH/util-files/portal-setup-wizard.properties" "$PATH_TO_BUNDLES/portal-setup-wizard.properties"
  cp "$LIFERAY_ZSH_INSTALLATION_PATH/util-files/test.USER.properties" "./test.$USER.properties"
  sed -i '' "s+%PATH_BUNDLES%+$PATH_TO_BUNDLES+g" "$PATH_TO_BUNDLES/portal-setup-wizard.properties"
  gitClean
  ij
}

_showHelp() {
  echo "Function help:"
  echo "$1 [options]"
  echo " "
  echo "options:"
  echo "-h | -help,     Show brief help"
  echo "-dxp,           Mount DXp bundle instead of CE one"
  echo "-hsql,          Use hsql data base instead of MySQL"
  echo "-u,             Update exiting mounted bundle"
}

mountBundle "$@"